<% provide(:title, 'Creat new course') %>
<h1>Make new course</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_for(@course) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>
      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :start_date %>
      <%= f.text_field :start_date %>

      <%= f.label :end_date %>
      <%= f.text_field :end_date %>

      <%= f.text_area :instruction, placeholder: "Compose new micropost..." %>
      <table class="table table-bordered">
          <tr>
             <td class="col-md-3">Name</td>
             <td class="col-md-6">Created at</td>
             <td class="col-md-3" align="center">Pick</td>
          </tr>
          <% @subjects.each_with_index do |sub| %>
            <tr>
              <td class="col-md-3">
                <%= link_to sub.name, sub %>
              </td>
              <td class="col-md-6">
                <%= sub.created_at %>
              </td>
              <td class="col-md-3">
                <%= f.fields_for :subjects, @course do |sub_field|%>
                  <%= check_box_tag "course[subject_ids][]", sub.id, @course.subjects.include?(sub) %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </table>
      <%= f.submit "Create new course", class: "btn btn-primary" %>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  jQuery('#course_start_date').datetimepicker();
  jQuery('#course_end_date').datetimepicker();
</script>
